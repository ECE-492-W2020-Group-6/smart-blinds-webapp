(this["webpackJsonpsmart-blinds-webapp"]=this["webpackJsonpsmart-blinds-webapp"]||[]).push([[0],{85:function(e,t,a){e.exports=a(98)},90:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=a(20),s=(a(90),a(10)),i=a(21),u=a.n(i),d=a(37),m=a(41),p=a(25),f=function(){function e(t){Object(m.a)(this,e),this.credentials=void 0,this.credentials=t}return Object(p.a)(e,[{key:"createFetch",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.t0=a,e.next="GET"===e.t0?4:"POST"===e.t0?6:8;break;case 4:return r={method:a,mode:"cors",headers:{"Content-Type":"text/json",Auth:this.credentials.password}},e.abrupt("break",8);case 6:return r={method:a,mode:"cors",headers:{"Content-Type":"application/json",Auth:this.credentials.password},body:n},e.abrupt("break",8);case 8:return console.log(this.credentials.address+t,r),e.abrupt("return",fetch(this.credentials.address+t,r));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),b=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],h=function(){function e(t,a){Object(m.a)(this,e),this.name=void 0,this.BlindAPI=void 0,this.address=void 0,this.BlindAPI=new f(a),this.name=t,this.address=a.address}return Object(p.a)(e,[{key:"getStatus",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.BlindAPI.createFetch("/temp","GET");case 2:return t=e.sent,e.next=5,t.clone().json();case 5:return a=e.sent,n={indoorTemp:a.temperature,outdoorTemp:-23,cloudCoverage:"High",motorPosition:50},e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"GetCurrentBehavior",value:function(e){var t=this,a=new Date,n=e[b[a.getUTCDay()]];return 0===n.length?e.defaultMode:(n.forEach((function(e){if(t.TimeslotIsActive(e,a))return e.mode})),e.defaultMode)}},{key:"TimeslotIsActive",value:function(e,t){function a(e){return"".concat(e.getUTCHours).concat(e.getUTCMinutes).concat(e.getUTCSeconds)}var n=a(t);return n>=a(e.start)&&n<a(e.end)}},{key:"getSchedule",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.testCases.schedules[0],a=new Promise((function(e,a){setTimeout((function(){e(t)}),500)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setSchedule",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.BlindAPI.createFetch("/schedule","POST",JSON.stringify(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCommand",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.BlindAPI.createFetch("/command","POST",JSON.stringify(t));case 2:return a=e.sent,e.next=5,a.clone().json();case 5:n=e.sent,console.log(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getAddress",value:function(){return this.address}}]),e}(),E={type:"ECO"},g={defaultMode:E,monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]},v=new h("Physical Test",{address:"http://10.147.17.181:5000/api/v1",password:""}),O={root:"/smart-blinds-webapp",defaultPath:"/",mainTitle:"Smart Blinds",MOTORMIDPOINT:50,testCases:{schedules:[g],stats:[{indoorTemp:21,outdoorTemp:20,cloudCoverage:"Low",motorPosition:0}],blinds:[new h("Local Test",{address:"http://127.0.0.1:5000/api/v1",password:""}),v,new h("Test Blinds",{address:"localhost",password:"123pass"}),new h("Other blinds",{address:"1.255.02.3",password:"pass123"})]},defaultObjects:{schedule:g,blindMode:E,stats:{indoorTemp:0,outdoorTemp:0,cloudCoverage:"Low",motorPosition:0}}},y=a(23),j=a(79),w=a(65),C=a.n(w),x=a(64),T=a.n(x),S=Object(j.a)({palette:{primary:T.a,secondary:C.a}}),k=a(147),N=a(146),B=a(126),P=a(129),M=a(130),G=a(51),I=a(4),A=a(68),F=a.n(A),L=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}))((function(e){var t=e.classes,a=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{position:"static"},r.a.createElement(P.a,null,r.a.createElement(M.a,{component:l.b,to:O.root+"/",edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(F.a,null)),r.a.createElement(G.a,{variant:"h6",color:"inherit"},a))))})),H=a(140),W=a(134),D=a(131),R=a(99),U=a(101),J=a(132),K=a(133),$=a(73),q=a.n($),z=a(69),Q=a.n(z),V=a(70),X=a.n(V),Y=a(71),Z=a.n(Y),_=a(72),ee=a.n(_),te=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)}})}))((function(e){var t=e.classes,a=e.stats;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.root},r.a.createElement(G.a,{className:t.title,color:"textPrimary"},"Current Status:"),r.a.createElement(D.a,{className:t.root}),r.a.createElement(U.a,null,r.a.createElement(J.a,null,r.a.createElement(Q.a,null)),r.a.createElement(K.a,{secondary:"Indoor Temperature",primary:"".concat(a.indoorTemp,"\xb0")})),r.a.createElement(U.a,null,r.a.createElement(J.a,null,a.outdoorTemp<5?r.a.createElement(X.a,null):r.a.createElement(Z.a,null)),r.a.createElement(K.a,{secondary:"Outdoor Temperature",primary:"".concat(a.outdoorTemp,"\xb0")})),r.a.createElement(U.a,null,r.a.createElement(J.a,null,r.a.createElement(ee.a,null)),r.a.createElement(K.a,{secondary:"Cloud Coverage",primary:a.cloudCoverage}))))})),ae=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.stats,a=e.blindList,n=e.switchBlind,o=e.classes;return r.a.createElement("div",{className:o.root},r.a.createElement(te,{stats:t}),r.a.createElement(W.a,null),r.a.createElement(D.a,{className:o.list},a.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.getAddress()},r.a.createElement(R.a,null,r.a.createElement(U.a,{button:!0,onClick:function(){n(e)},component:l.b,to:O.root+"/blind"},r.a.createElement(J.a,null,r.a.createElement(q.a,null)),r.a.createElement(K.a,{primary:e.getName()}))),r.a.createElement(W.a,null))}))))})),ne=a(135),re=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{variant:"contained",color:"primary"},"Hello World"))},oe=a(77),ce=a.n(oe),le=a(78),se=a.n(le),ie=a(54),ue=a.n(ie),de=a(76),me=a.n(de),pe=a(74),fe=a.n(pe),be=a(75),he=a.n(be),Ee=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{top:"auto",bottom:0},toolBar:{display:"flex",justifyContent:"space-between"}})}))((function(e){var t=e.buttons,a=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{position:"fixed",className:a.appBar},r.a.createElement(P.a,{className:a.toolBar},t.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e)})))))})),ge=a(144),ve=a(136),Oe=a(145),ye=a(141),je=a(137);function we(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var Ce=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1,padding:e.spacing(0)},modalDiv:{position:"absolute",width:"90%",backgroundColor:e.palette.background.paper,border:"2px solid",borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},formControl:{margin:e.spacing(1),midWidth:120},inputs:{display:"flex",justifyContent:"left"}})}))((function(e){var t=e.classes,a=e.open,o=e.handleClose,c=e.sendCommand,l=Object(n.useState)(we),i=Object(s.a)(l,1)[0],u=Object(n.useState)(30),d=Object(s.a)(u,2),m=d[0],p=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{open:a,onClose:o},r.a.createElement("div",{style:i,className:t.modalDiv,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("h2",{id:"simple-modal-title"},"Manual Control"),r.a.createElement("p",{id:"simple-modal-description"},"Control the blinds directly"),r.a.createElement("div",{className:t.inputs},r.a.createElement(ve.a,{className:t.formControl},r.a.createElement(Oe.a,null,"Duration"),r.a.createElement(ye.a,{value:m,onChange:function(e){p(e.target.value)}},r.a.createElement(je.a,{value:30},"30 Mins"),r.a.createElement(je.a,{value:60},"1 Hour"),r.a.createElement(je.a,{value:240},"4 Hours"),r.a.createElement(je.a,{value:0},"Today"))),r.a.createElement(ne.a,{onClick:function(){c("LIGHT",m),o()}},"Open"),r.a.createElement(ne.a,{onClick:function(){c("DARK",m),o()}},"Close")))))})),xe=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.classes,a=e.blind,o=Object(n.useState)(),c=Object(s.a)(o,2),i=c[0],u=c[1],d=Object(n.useState)(),m=Object(s.a)(d,2),p=m[0],f=m[1],b=Object(n.useState)(O.defaultObjects.blindMode),h=Object(s.a)(b,2),E=h[0],g=h[1],v=Object(n.useState)(!1),y=Object(s.a)(v,2),j=y[0],w=y[1];Object(n.useEffect)((function(){void 0!==a&&(a.getSchedule().then((function(e){f(e),g(a.GetCurrentBehavior(e))})),a.getStatus().then((function(e){u(e)})))}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.root},r.a.createElement(G.a,{className:t.title,color:"textPrimary"},"Current Status:"),r.a.createElement(D.a,{className:t.root}),r.a.createElement(U.a,null,r.a.createElement(J.a,null,void 0===i?r.a.createElement(ue.a,null):i.motorPosition>O.MOTORMIDPOINT?r.a.createElement(fe.a,null):r.a.createElement(he.a,null)),r.a.createElement(K.a,{secondary:"Motor Position",primary:void 0===i?"loading...":i.motorPosition})),r.a.createElement(U.a,null,r.a.createElement(J.a,null,void 0===p?r.a.createElement(ue.a,null):"ECO"===E.type?r.a.createElement(me.a,null):"LIGHT"===E.type?r.a.createElement(ce.a,null):r.a.createElement(se.a,null)),r.a.createElement(K.a,{secondary:"Behavior",primary:void 0===p?"loading...":E.type}))),r.a.createElement(Ee,{buttons:[r.a.createElement(ne.a,{onClick:function(){w(!0)},color:"inherit"},"Manual Control"),r.a.createElement(ne.a,{component:l.b,to:O.root+"/blind/createschedule",color:"inherit"},"Set Schedule")]}),r.a.createElement(Ce,{open:j,handleClose:function(){w(!1)},sendCommand:function(e,t,n){var r=0;void 0!==n&&(r=n),a.sendCommand({mode:e,duration:t,position:r})}}))})),Te=a(11),Se=a(143),ke=a(138),Ne=a(139),Be=Object(I.a)((function(e){return Object(N.a)({root:{flexGrow:1,padding:e.spacing(0)},weekWrapper:{display:"grid",gridTemplateColumns:"repeat(8, minmax(25px, 1fr))",gridTemplateRows:"1fr",gridAutoFlow:"dense",justifyItems:"stretch",alignItems:"stretch",margin:e.spacing(1)},timeSlotWrapper:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"scroll",height:"70vh",margin:e.spacing(1)},dayHeader:{textAlign:"center"},timeLegend:{textAlign:"center",alignItems:"center",display:"grid",height:e.spacing(6),borderBottomColor:"rgb(139, 195, 74)"},timeSlot:{height:e.spacing(6),borderBottomColor:"rgb(139, 195, 74)"},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.classes,a=e.blind,o=Object(n.useState)(O.defaultObjects.schedule),c=Object(s.a)(o,2),i=c[0],u=c[1],d=Object(n.useState)(i),m=Object(s.a)(d,2),p=(m[0],m[1],Object(n.useState)(O.defaultObjects.blindMode)),f=Object(s.a)(p,2);f[0],f[1];Object(n.useEffect)((function(){void 0!==a&&a.getSchedule().then((function(e){u(e)}))}),[a]);for(var h=["Time"].concat(Object(Te.a)(b.map((function(e){return function(e){return e[0].toLocaleUpperCase()+e.slice(1,3)}(e)})))).map((function(e,a){return r.a.createElement(G.a,{key:e,className:t.dayHeader},e)})),E=[],g=0;g<96;g++){var v=Math.floor(g/4),y=v>11?"PM":"AM";"PM"===y&&12!==v?v-=12:0===v&&(v+=12);var j=g%4*15,w="".concat(v,":").concat(0===j?"00":j," ").concat(y," ");E.push({title:w})}for(var C={title:""},x=[],T=0;T<7;T++)x.push(C);var S=[];E.forEach((function(e){return S.push.apply(S,[e].concat(x))}));var k=r.a.createElement(ke.a,{spacing:0,cellHeight:"auto",cols:8},S.map((function(e,a){return r.a.createElement(Ne.a,{key:a,cols:1},function(e,a){var n=t.timeSlot,o=0,c=a<8?1:0,l=Math.floor(a/8)%4===3?2:1;return a%8===0&&(o=1,n=t.timeLegend),r.a.createElement(Se.a,{borderBottom:l,borderColor:"primary.main",borderTop:c,borderLeft:o,border:1,className:n,onClick:function(){return console.log("nice")}},e.title)}(e,a))})));return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.root},r.a.createElement("div",{className:t.weekWrapper},h),r.a.createElement("div",{className:t.timeSlotWrapper},k)),r.a.createElement(Ee,{buttons:[r.a.createElement(ne.a,{component:l.b,to:O.root+"/blind",color:"inherit"},"Save"),r.a.createElement(ne.a,{component:l.b,to:O.root+"/blind",color:"inherit"},"Cancel")]}))})),Pe=Object(I.a)((function(e){return Object(N.a)({root:{height:"100%",margin:"0",width:"100vw",position:"fixed"}})}))((function(e){var t=e.classes,a=O.testCases.blinds,o=O.defaultObjects.stats,c=Object(n.useState)(a),l=Object(s.a)(c,2),i=l[0],u=(l[1],Object(n.useState)()),d=Object(s.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)("Smart Blinds"),b=Object(s.a)(f,2),h=b[0],E=b[1],g=Object(n.useState)(o),v=Object(s.a)(g,2),j=v[0],w=v[1];function C(e){p(e),E(e.getName())}Object(n.useEffect)((function(){!function(){if(i.length<1)return;i[0].getStatus().then((function(e){w(e)}))}()}),[]);var x=Object(y.g)();return Object(n.useEffect)((function(){x.pathname===O.root+O.defaultPath&&E(O.mainTitle)}),[x]),r.a.createElement("div",{className:t.root},r.a.createElement(k.a,null),r.a.createElement(H.a,{theme:S},r.a.createElement(L,{title:h}),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:O.root+"/",render:function(e){return r.a.createElement(ae,Object.assign({},e,{stats:j,blindList:i,switchBlind:C}))}}),r.a.createElement(y.b,{exact:!0,path:O.root+"/blind",render:function(e){return r.a.createElement(xe,Object.assign({},e,{blind:m}))}}),r.a.createElement(y.b,{path:O.root+"/schedules",component:re}),r.a.createElement(y.b,{path:O.root+"/blind/createSchedule",render:function(e){return r.a.createElement(Be,Object.assign({},e,{blind:m}))}}),r.a.createElement(y.a,{to:O.root+O.defaultPath}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,null,r.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[85,1,2]]]);
//# sourceMappingURL=main.3b8c882f.chunk.js.map