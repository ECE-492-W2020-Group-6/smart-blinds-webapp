(this["webpackJsonpsmart-blinds-webapp"]=this["webpackJsonpsmart-blinds-webapp"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=a(18),s=(a(99),a(10)),i=a(19),u=a.n(i),d=a(37),m=a(30),p=a(25),f=function(){function e(t){Object(m.a)(this,e),this.credentials=void 0,this.credentials=t}return Object(p.a)(e,[{key:"createFetch",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},e.t0=a,e.next="GET"===e.t0?4:"POST"===e.t0?6:8;break;case 4:return r={method:a,mode:"cors",headers:{"Content-Type":"text/json",Auth:this.credentials.password}},e.abrupt("break",8);case 6:return r={method:a,mode:"cors",headers:{"Content-Type":"application/json",Auth:this.credentials.password},body:n},e.abrupt("break",8);case 8:return console.log(this.credentials.address+t,r),e.abrupt("return",fetch(this.credentials.address+t,r));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),b=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],h=function(){function e(t,a){Object(m.a)(this,e),this.name=void 0,this.BlindAPI=void 0,this.address=void 0,this.BlindAPI=new f(a),this.name=t,this.address=a.address}return Object(p.a)(e,[{key:"getStatus",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.BlindAPI.createFetch("/temp","GET");case 2:return t=e.sent,e.next=5,t.clone().json();case 5:return a=e.sent,n={indoorTemp:a.temperature,outdoorTemp:-23,cloudCoverage:"High",motorPosition:50},e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"GetCurrentBehavior",value:function(e){var t=this,a=new Date,n=e[b[a.getUTCDay()]];return 0===n.length?e.defaultMode:(n.forEach((function(e){if(t.TimeslotIsActive(e,a))return e.mode})),e.defaultMode)}},{key:"TimeslotIsActive",value:function(e,t){function a(e){return"".concat(e.getUTCHours).concat(e.getUTCMinutes).concat(e.getUTCSeconds)}var n=a(t);return n>=a(e.start)&&n<a(e.end)}},{key:"getSchedule",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.testCases.schedules[0],a=new Promise((function(e,a){setTimeout((function(){e(t)}),500)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setSchedule",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.BlindAPI.createFetch("/schedule","POST",JSON.stringify(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCommand",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.BlindAPI.createFetch("/command","POST",JSON.stringify(t));case 2:return a=e.sent,e.next=5,a.clone().json();case 5:n=e.sent,console.log(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getAddress",value:function(){return this.address}}]),e}(),E={type:"ECO"},v=new Date("2020-03-22T06:00:00Z"),g=new Date(v);g.setHours(4);var O={defaultMode:E,monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[{mode:{type:"LIGHT"},start:v,end:g}]},y=new h("Physical Test",{address:"http://10.147.17.181:5000/api/v1",password:""}),j={root:"/smart-blinds-webapp",defaultPath:"/",mainTitle:"Smart Blinds",MOTORMIDPOINT:50,testCases:{schedules:[O],stats:[{indoorTemp:21,outdoorTemp:20,cloudCoverage:"Low",motorPosition:0}],blinds:[new h("Local Test",{address:"http://127.0.0.1:5000/api/v1",password:""}),y,new h("Test Blinds",{address:"localhost",password:"123pass"}),new h("Other blinds",{address:"1.255.02.3",password:"pass123"})]},defaultObjects:{schedule:O,blindMode:E,stats:{indoorTemp:0,outdoorTemp:0,cloudCoverage:"Low",motorPosition:0}}},w=a(22),T=a(89),C=a(73),x=a.n(C),S=a(72),k=a.n(S),N=Object(T.a)({palette:{primary:k.a,secondary:x.a}}),P=a(155),B=a(154),I=a(138),M=a(141),G=a(142),A=a(52),R=a(5),F=a(76),H=a.n(F),D=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}))((function(e){var t=e.classes,a=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{position:"static"},r.a.createElement(M.a,null,r.a.createElement(G.a,{component:l.b,to:j.root+"/",edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(H.a,null)),r.a.createElement(A.a,{variant:"h6",color:"inherit"},a))))})),L=a(150),W=a(146),U=a(143),J=a(111),K=a(113),Z=a(144),$=a(145),q=a(80),z=a.n(q),Q=a(50),V=a.n(Q),X=a(77),Y=a.n(X),_=a(78),ee=a.n(_),te=a(79),ae=a.n(te),ne=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)}})}))((function(e){var t=e.classes,a=e.stats;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:t.root},r.a.createElement(A.a,{className:t.title,color:"textPrimary"},"Current Status:"),r.a.createElement(U.a,{className:t.root}),r.a.createElement(K.a,null,r.a.createElement(Z.a,null,r.a.createElement(V.a,null)),r.a.createElement($.a,{secondary:"Indoor Temperature",primary:"".concat(a.indoorTemp,"\xb0")})),r.a.createElement(K.a,null,r.a.createElement(Z.a,null,a.outdoorTemp<5?r.a.createElement(Y.a,null):r.a.createElement(ee.a,null)),r.a.createElement($.a,{secondary:"Outdoor Temperature",primary:"".concat(a.outdoorTemp,"\xb0")})),r.a.createElement(K.a,null,r.a.createElement(Z.a,null,r.a.createElement(ae.a,null)),r.a.createElement($.a,{secondary:"Cloud Coverage",primary:a.cloudCoverage}))))})),re=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.blindList,a=e.switchBlind,o=e.classes,c=j.defaultObjects.stats,i=Object(n.useState)(c),u=Object(s.a)(i,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){t[0].getStatus().then((function(e){m(e)}));var e=setInterval((function(){t[0].getStatus().then((function(e){console.log("updated"),m(e)}))}),5e3);return function(){return clearInterval(e)}})),r.a.createElement("div",{className:o.root},r.a.createElement(ne,{stats:d}),r.a.createElement(W.a,null),r.a.createElement(U.a,{className:o.list},t.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.getAddress()},r.a.createElement(J.a,null,r.a.createElement(K.a,{button:!0,onClick:function(){a(e)},component:l.b,to:j.root+"/blind"},r.a.createElement(Z.a,null,r.a.createElement(z.a,null)),r.a.createElement($.a,{primary:e.getName()}))),r.a.createElement(W.a,null))}))))})),oe=a(147),ce=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{variant:"contained",color:"primary"},"Hello World"))},le=a(84),se=a.n(le),ie=a(85),ue=a.n(ie),de=a(58),me=a.n(de),pe=a(83),fe=a.n(pe),be=a(81),he=a.n(be),Ee=a(82),ve=a.n(Ee),ge=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{top:"auto",bottom:0},toolBar:{display:"flex",justifyContent:"space-between"}})}))((function(e){var t=e.buttons,a=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{position:"fixed",className:a.appBar},r.a.createElement(M.a,{className:a.toolBar},t.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e)})))))})),Oe=a(153),ye=a(148),je=a(156),we=a(151),Te=a(149);function Ce(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var xe=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1,padding:e.spacing(0)},modalDiv:{position:"absolute",width:"90%",backgroundColor:e.palette.background.paper,border:"2px solid",borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},formControl:{margin:e.spacing(1),midWidth:120},inputs:{display:"flex",justifyContent:"left"}})}))((function(e){var t=e.classes,a=e.open,o=e.handleClose,c=e.sendCommand,l=Object(n.useState)(Ce),i=Object(s.a)(l,1)[0],u=Object(n.useState)(30),d=Object(s.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(0),b=Object(s.a)(f,2);b[0],b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{open:a,onClose:o},r.a.createElement("div",{style:i,className:t.modalDiv,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("h2",{id:"simple-modal-title"},"Manual Control"),r.a.createElement("p",{id:"simple-modal-description"},"Control the blinds directly"),r.a.createElement("div",{className:t.inputs},r.a.createElement(ye.a,{className:t.formControl},r.a.createElement(je.a,null,"Duration"),r.a.createElement(we.a,{value:m,onChange:function(e){p(e.target.value)}},r.a.createElement(Te.a,{value:30},"30 Mins"),r.a.createElement(Te.a,{value:60},"1 Hour"),r.a.createElement(Te.a,{value:240},"4 Hours"),r.a.createElement(Te.a,{value:0},"Today"))),r.a.createElement(oe.a,{onClick:function(){c("LIGHT",m),o()}},"Open"),r.a.createElement(oe.a,{onClick:function(){c("DARK",m),o()}},"Close")))))})),Se=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.classes,a=e.blind,o=Object(n.useState)(),c=Object(s.a)(o,2),i=c[0],u=c[1],d=Object(n.useState)(),m=Object(s.a)(d,2),p=m[0],f=m[1],b=Object(n.useState)(j.defaultObjects.blindMode),h=Object(s.a)(b,2),E=h[0],v=h[1],g=Object(n.useState)(!1),O=Object(s.a)(g,2),y=O[0],w=O[1];Object(n.useEffect)((function(){void 0!==a&&(a.getSchedule().then((function(e){f(e),v(a.GetCurrentBehavior(e))})),a.getStatus().then((function(e){u(e)})))}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:t.root},r.a.createElement(A.a,{className:t.title,color:"textPrimary"},"Current Status:"),r.a.createElement(U.a,{className:t.root}),r.a.createElement(K.a,null,r.a.createElement(Z.a,null,r.a.createElement(V.a,null)),r.a.createElement($.a,{secondary:"Indoor Temperature",primary:void 0===i?"loading...":"".concat(i.indoorTemp,"\xb0")})),r.a.createElement(K.a,null,r.a.createElement(Z.a,null,void 0===i?r.a.createElement(me.a,null):i.motorPosition>j.MOTORMIDPOINT?r.a.createElement(he.a,null):r.a.createElement(ve.a,null)),r.a.createElement($.a,{secondary:"Motor Position",primary:void 0===i?"loading...":i.motorPosition})),r.a.createElement(K.a,null,r.a.createElement(Z.a,null,void 0===p?r.a.createElement(me.a,null):"ECO"===E.type?r.a.createElement(fe.a,null):"LIGHT"===E.type?r.a.createElement(se.a,null):r.a.createElement(ue.a,null)),r.a.createElement($.a,{secondary:"Behavior",primary:void 0===p?"loading...":E.type}))),r.a.createElement(ge,{buttons:[r.a.createElement(oe.a,{onClick:function(){w(!0)},color:"inherit"},"Manual Control"),r.a.createElement(oe.a,{component:l.b,to:j.root+"/blind/createschedule",color:"inherit"},"Set Schedule")]}),r.a.createElement(xe,{open:y,handleClose:function(){w(!1)},sendCommand:function(e,t,n){var r=0;void 0!==n&&(r=n),a.sendCommand({mode:e,duration:t,position:r})}}))})),ke=a(24),Ne=a(86),Pe=a(87),Be=a(90),Ie=a(88),Me=a.n(Ie),Ge=(a(109),function(e){function t(){return Object(m.a)(this,t),Object(Ne.a)(this,Object(Pe.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),t}(Me.a)),Ae=Object(R.a)((function(e){return Object(B.a)({root:{flexGrow:1,padding:e.spacing(0)},weekWrapper:{display:"grid",gridTemplateColumns:"repeat(8, minmax(25px, 1fr))",gridTemplateRows:"1fr",gridAutoFlow:"dense",justifyItems:"stretch",alignItems:"stretch",margin:e.spacing(1)},timeSlotWrapper:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"scroll",height:"70vh"},dayHeader:{textAlign:"center"},tableRow:{height:e.spacing(6),textAlign:"center",alignItems:"center",padding:"0px"},timeTable:{borderBottomColor:"rgb(139, 195, 74)",tableLayout:"fixed",borderSpacing:"0px",width:"calc(100% - 8px)",minWidth:e.spacing(3),margin:e.spacing(1)},fitTables:{width:"12.5%"}})}))((function(e){var t=e.classes,a=e.blind,o=Object(n.useState)(j.defaultObjects.schedule),c=Object(s.a)(o,2),i=c[0],u=c[1],d=function(e){var t=0;return t+=4*e.getHours(),t+=15*Math.ceil(e.getMinutes()/15)},m=Object(n.useState)(function(e){for(var t=[],a=function(a){for(var n=b[a],r=0;r<96;r++)void 0===t[r]&&(t[r]=[]),t[r].push({value:e.defaultMode.type});e[n].forEach((function(e){for(var n=d(e.start),r=d(e.end),o=n;o<r;o++)t[o][a]={value:e.mode.type}}))},n=0;n<7;n++)a(n);return t}(i)),p=Object(s.a)(m,2),f=p[0],h=(p[1],Object(n.useState)(j.defaultObjects.blindMode)),E=Object(s.a)(h,2);E[0],E[1];Object(n.useEffect)((function(){void 0!==a&&a.getSchedule().then((function(e){u(e)}))}),[a]);for(var v=["Time"].concat(Object(ke.a)(b.map((function(e){return function(e){return e[0].toLocaleUpperCase()+e.slice(1,3)}(e)})))).map((function(e,a){return r.a.createElement(A.a,{key:e,className:t.dayHeader},e)})),g=[],O=0;O<96;O++){var y=Math.floor(O/4),w=y>11?"PM":"AM";"PM"===w&&12!==y?y-=12:0===y&&(y+=12);var T=O%4*15,C="".concat(y,":").concat(0===T?"00":T," ").concat(w," ");void 0===g[O]&&(g[O]=[]),g[O].push({value:C})}var x=r.a.createElement(Ge,{data:f,valueRenderer:function(e){return e.value},className:t.timeTable,rowRenderer:function(e){return r.a.createElement("tr",{className:t.tableRow},e.children)}}),S=r.a.createElement(Ge,{data:g,valueRenderer:function(e){return e.value},sheetRenderer:function(e){return r.a.createElement("table",{className:t.timeTable},r.a.createElement("tbody",null,e.children))},rowRenderer:function(e){return r.a.createElement("tr",{className:t.tableRow},e.children)}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:t.root},r.a.createElement("div",{className:t.weekWrapper},v),r.a.createElement("div",{className:t.timeSlotWrapper},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:t.fitTables},S),r.a.createElement("td",null,x)))))),r.a.createElement(ge,{buttons:[r.a.createElement(oe.a,{component:l.b,to:j.root+"/blind",color:"inherit"},"Save"),r.a.createElement(oe.a,{component:l.b,to:j.root+"/blind",color:"inherit"},"Cancel")]}))})),Re=Object(R.a)((function(e){return Object(B.a)({root:{height:"100%",margin:"0",width:"100vw",position:"fixed"}})}))((function(e){var t=e.classes,a=j.testCases.blinds,o=Object(n.useState)(a),c=Object(s.a)(o,2),l=c[0],i=(c[1],Object(n.useState)(l[0])),u=Object(s.a)(i,2),d=u[0],m=u[1],p=Object(n.useState)("Smart Blinds"),f=Object(s.a)(p,2),b=f[0],h=f[1];function E(e){m(e),h(e.getName())}var v=Object(w.g)();return Object(n.useEffect)((function(){v.pathname===j.root+j.defaultPath&&h(j.mainTitle)}),[v]),r.a.createElement("div",{className:t.root},r.a.createElement(P.a,null),r.a.createElement(L.a,{theme:N},r.a.createElement(D,{title:b}),r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:j.root+"/",render:function(e){return r.a.createElement(re,Object.assign({},e,{blindList:l,switchBlind:E}))}}),r.a.createElement(w.b,{exact:!0,path:j.root+"/blind",render:function(e){return r.a.createElement(Se,Object.assign({},e,{blind:d}))}}),r.a.createElement(w.b,{path:j.root+"/schedules",component:ce}),r.a.createElement(w.b,{exact:!0,path:j.root+"/blind/createSchedule",render:function(e){return r.a.createElement(Ae,Object.assign({},e,{blind:d}))}}),r.a.createElement(w.a,{to:j.root+j.defaultPath}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,null,r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t,a){e.exports=a(110)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.c13c3271.chunk.js.map