(this["webpackJsonpsmart-blinds-webapp"]=this["webpackJsonpsmart-blinds-webapp"]||[]).push([[0],{66:function(e,t,a){e.exports=a(79)},71:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),l=a(13),i=(a(71),a(10)),s=a(20),u=a.n(s),m=a(28),d=a(32),p=a(24),f=function(){function e(t){Object(d.a)(this,e),this.credentials=void 0,this.credentials=t}return Object(p.a)(e,[{key:"createFetch",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",mode:"cors",headers:{"Content-Type":"text/json",Auth:this.credentials.password},body:t},e.abrupt("return",fetch(this.credentials.address,a));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],h=function(){function e(t,a){Object(d.a)(this,e),this.name=void 0,this.BlindAPI=void 0,this.address=void 0,this.BlindAPI=new f(a),this.name=t,this.address=a.address}return Object(p.a)(e,[{key:"getStatus",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={indoorTemp:22,outdoorTemp:-23,cloudCoverage:"High",motorPosition:50},a=new Promise((function(e,a){setTimeout((function(){e(t)}),500)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"GetCurrentBehavior",value:function(e){var t=this,a=new Date,n=e[b[a.getUTCDay()]];return 0===n.length?e.defaultMode:(n.forEach((function(e){if(t.TimeslotIsActive(e,a))return e.mode})),e.defaultMode)}},{key:"TimeslotIsActive",value:function(e,t){function a(e){return"".concat(e.getUTCHours).concat(e.getUTCMinutes).concat(e.getUTCSeconds)}var n=a(t);return n>=a(e.start)&&n<a(e.end)}},{key:"getSchedule",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.testCases.schedules[0],a=new Promise((function(e,a){setTimeout((function(){e(t)}),500)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setSchedule",value:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.BlindAPI.createFetch(JSON.stringify(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getAddress",value:function(){return this.address}}]),e}(),g={type:"ECO"},E={defaultMode:g,monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[],sunday:[]},v={root:"/smart-blinds-webapp",defaultPath:"/",mainTitle:"Smart Blinds",MOTORMIDPOINT:50,testCases:{schedules:[E],stats:[{indoorTemp:21,outdoorTemp:20,cloudCoverage:"Low",motorPosition:0}],blinds:[new h("Test Blinds",{address:"localhost",password:"123pass"}),new h("Other blinds",{address:"1.255.02.3",password:"pass123"})]},defaultObjects:{schedule:E,blindMode:g}},y=a(18),O=a(63),j=a(49),w=a.n(j),S=a(48),x=a.n(S),C=Object(O.a)({palette:{primary:x.a,secondary:w.a}}),T=a(110),k=a(111),N=a(97),B=a(98),P=a(99),M=a(36),G=a(4),I=a(52),A=a.n(I),F=Object(G.a)((function(e){return Object(k.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}))((function(e){var t=e.classes,a=e.title;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{position:"static"},r.a.createElement(B.a,null,r.a.createElement(P.a,{component:l.b,to:v.root+"/",edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(A.a,null)),r.a.createElement(M.a,{variant:"h6",color:"inherit"},a))))})),L=a(107),W=a(104),H=a(100),R=a(81),U=a(101),D=a(102),J=a(103),$=a(57),q=a.n($),z=a(53),K=a.n(z),Q=a(54),V=a.n(Q),X=a(55),Y=a.n(X),Z=a(56),_=a.n(Z),ee=Object(G.a)((function(e){return Object(k.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)}})}))((function(e){var t=e.classes,a=e.stats;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.root},r.a.createElement(M.a,{className:t.title,color:"textPrimary"},"Current Status:"),r.a.createElement(H.a,{className:t.root}),r.a.createElement(U.a,null,r.a.createElement(D.a,null,r.a.createElement(K.a,null)),r.a.createElement(J.a,{secondary:"Indoor Temperature",primary:"".concat(a.indoorTemp,"\xb0")})),r.a.createElement(U.a,null,r.a.createElement(D.a,null,a.outdoorTemp<5?r.a.createElement(V.a,null):r.a.createElement(Y.a,null)),r.a.createElement(J.a,{secondary:"Outdoor Temperature",primary:"".concat(a.outdoorTemp,"\xb0")})),r.a.createElement(U.a,null,r.a.createElement(D.a,null,r.a.createElement(_.a,null)),r.a.createElement(J.a,{secondary:"Cloud Coverage",primary:a.cloudCoverage}))))})),te=Object(G.a)((function(e){return Object(k.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.stats,a=e.blindList,n=e.switchBlind,o=e.classes;return r.a.createElement("div",{className:o.root},r.a.createElement(ee,{stats:t}),r.a.createElement(W.a,null),r.a.createElement(H.a,{className:o.list},a.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.getAddress()},r.a.createElement(R.a,null,r.a.createElement(U.a,{button:!0,onClick:function(){n(e)},component:l.b,to:v.root+"/blind"},r.a.createElement(D.a,null,r.a.createElement(q.a,null)),r.a.createElement(J.a,{primary:e.getName()}))),r.a.createElement(W.a,null))}))))})),ae=a(105),ne=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{variant:"contained",color:"primary"},"Hello World"))},re=a(61),oe=a.n(re),ce=a(62),le=a.n(ce),ie=a(41),se=a.n(ie),ue=a(60),me=a.n(ue),de=a(58),pe=a.n(de),fe=a(59),be=a.n(fe),he=Object(G.a)((function(e){return Object(k.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{top:"auto",bottom:0},toolBar:{display:"flex",justifyContent:"space-between"}})}))((function(e){var t=e.buttons,a=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{position:"fixed",className:a.appBar},r.a.createElement(B.a,{className:a.toolBar},t.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e)})))))})),ge=Object(G.a)((function(e){return Object(k.a)({root:{flexGrow:1,padding:e.spacing(0)},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.classes,a=e.blind,o=Object(n.useState)(),c=Object(i.a)(o,2),s=c[0],u=c[1],m=Object(n.useState)(),d=Object(i.a)(m,2),p=d[0],f=d[1],b=Object(n.useState)(v.defaultObjects.blindMode),h=Object(i.a)(b,2),g=h[0],E=h[1];return Object(n.useEffect)((function(){void 0!==a&&(a.getSchedule().then((function(e){f(e),E(a.GetCurrentBehavior(e))})),a.getStatus().then((function(e){u(e)})))}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.root},r.a.createElement(M.a,{className:t.title,color:"textPrimary"},"Current Status:"),r.a.createElement(H.a,{className:t.root}),r.a.createElement(U.a,null,r.a.createElement(D.a,null,void 0===s?r.a.createElement(se.a,null):s.motorPosition>v.MOTORMIDPOINT?r.a.createElement(pe.a,null):r.a.createElement(be.a,null)),r.a.createElement(J.a,{secondary:"Motor Position",primary:void 0===s?"loading...":s.motorPosition})),r.a.createElement(U.a,null,r.a.createElement(D.a,null,void 0===p?r.a.createElement(se.a,null):"ECO"===g.type?r.a.createElement(me.a,null):"LIGHT"===g.type?r.a.createElement(oe.a,null):r.a.createElement(le.a,null)),r.a.createElement(J.a,{secondary:"Behavior",primary:void 0===p?"loading...":g.type}))),r.a.createElement(he,{buttons:[r.a.createElement(ae.a,{component:l.b,to:v.root+"/",color:"inherit"},"Manual Control"),r.a.createElement(ae.a,{component:l.b,to:v.root+"/blind/createschedule",color:"inherit"},"Set Schedule")]}))})),Ee=a(8),ve=a(109),ye=a(106),Oe=a(112),je=Object(G.a)((function(e){return Object(k.a)({root:{flexGrow:1,padding:e.spacing(0)},weekWrapper:{display:"grid",gridTemplateColumns:"repeat(8, minmax(25px, 1fr))",gridTemplateRows:"1fr",gridAutoFlow:"dense",justifyItems:"stretch",alignItems:"stretch",margin:e.spacing(1)},timeSlotWrapper:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"scroll",height:"70vh",margin:e.spacing(1)},dayHeader:{textAlign:"center"},timeLegend:{textAlign:"center",alignItems:"center",display:"grid",height:e.spacing(6),borderBottomColor:"rgb(139, 195, 74)"},timeSlot:{height:e.spacing(6),borderBottomColor:"rgb(139, 195, 74)"},title:{flexGrow:1,padding:e.spacing(2)},list:{padding:e.spacing(0)}})}))((function(e){var t=e.classes,a=e.blind,o=Object(n.useState)(v.defaultObjects.schedule),c=Object(i.a)(o,2),s=c[0],u=c[1],m=Object(n.useState)(s),d=Object(i.a)(m,2),p=(d[0],d[1],Object(n.useState)(v.defaultObjects.blindMode)),f=Object(i.a)(p,2);f[0],f[1];Object(n.useEffect)((function(){void 0!==a&&a.getSchedule().then((function(e){u(e)}))}),[a]);for(var h=["Time"].concat(Object(Ee.a)(b.map((function(e){return function(e){return e[0].toLocaleUpperCase()+e.slice(1,3)}(e)})))).map((function(e,a){return r.a.createElement(M.a,{key:e,className:t.dayHeader},e)})),g=[],E=0;E<96;E++){var y=Math.floor(E/4),O=y>11?"PM":"AM";"PM"===O&&12!==y?y-=12:0===y&&(y+=12);var j=E%4*15,w="".concat(y,":").concat(0===j?"00":j," ").concat(O," ");g.push({title:w})}for(var S={title:""},x=[],C=0;C<7;C++)x.push(S);var T=[];g.forEach((function(e){return T.push.apply(T,[e].concat(x))}));var k=r.a.createElement(ye.a,{spacing:0,cellHeight:"auto",cols:8},T.map((function(e,a){return r.a.createElement(Oe.a,{key:a,cols:1},function(e,a){var n=t.timeSlot,o=0,c=a<8?1:0,l=Math.floor(a/8)%4===3?2:1;return a%8===0&&(o=1,n=t.timeLegend),r.a.createElement(ve.a,{borderBottom:l,borderColor:"primary.main",borderTop:c,borderLeft:o,border:1,className:n,onClick:function(){return console.log("nice")}},e.title)}(e,a))})));return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.root},r.a.createElement("div",{className:t.weekWrapper},h),r.a.createElement("div",{className:t.timeSlotWrapper},k)),r.a.createElement(he,{buttons:[r.a.createElement(ae.a,{component:l.b,to:v.root+"/blind",color:"inherit"},"Save"),r.a.createElement(ae.a,{component:l.b,to:v.root+"/blind",color:"inherit"},"Cancel")]}))})),we=Object(G.a)((function(e){return Object(k.a)({root:{height:"100%",margin:"0",width:"100vw",position:"fixed"}})}))((function(e){var t=e.classes,a=v.testCases.blinds,o=v.testCases.stats[0],c=Object(n.useState)(a),l=Object(i.a)(c,2),s=l[0],u=(l[1],Object(n.useState)()),m=Object(i.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)("Smart Blinds"),b=Object(i.a)(f,2),h=b[0],g=b[1],E=Object(n.useState)(o),O=Object(i.a)(E,2),j=O[0],w=O[1];function S(e){p(e),g(e.getName())}Object(n.useEffect)((function(){s.length<1||s[0].getStatus().then((function(e){w(e)}))}),[s]);var x=Object(y.g)();return Object(n.useEffect)((function(){x.pathname===v.root+v.defaultPath&&g(v.mainTitle)}),[x]),r.a.createElement("div",{className:t.root},r.a.createElement(T.a,null),r.a.createElement(L.a,{theme:C},r.a.createElement(F,{title:h}),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:v.root+"/",render:function(e){return r.a.createElement(te,Object.assign({},e,{stats:j,blindList:s,switchBlind:S}))}}),r.a.createElement(y.b,{exact:!0,path:v.root+"/blind",render:function(e){return r.a.createElement(ge,Object.assign({},e,{blind:d}))}}),r.a.createElement(y.b,{path:v.root+"/schedules",component:ne}),r.a.createElement(y.b,{path:v.root+"/blind/createSchedule",render:function(e){return r.a.createElement(je,Object.assign({},e,{blind:d}))}}),r.a.createElement(y.a,{to:v.root+v.defaultPath}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,null,r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.0a8fa01e.chunk.js.map